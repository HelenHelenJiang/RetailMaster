<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Nymi SDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<!-- <link href="doxygen.css" rel="stylesheet" type="text/css" /> -->
<link href="customStylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top" bgcolor=#37bec4><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
<tr style="height: 0em;">
  <td id='logoBox'>
  <img  id='logoImg' src ="logo.png"></a>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
			<img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
			<img id="MSearchSelect" src="search/mag_sel.png" alt="">
			<input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__security_functions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Security Functions<div class="ingroups"><a class="el" href="group__security.html">Security Tools</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for using the security tools a Nymi provides. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga342a2d82b8de6e0fe84efc911001d8bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga342a2d82b8de6e0fe84efc911001d8bf">nclCreateSigKeyPair</a> (int nymiHandle)</td></tr>
<tr class="memdesc:ga342a2d82b8de6e0fe84efc911001d8bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell a Nymi to create an NEA-specific pair of cryptographic keys for use with signatures.  <a href="#ga342a2d82b8de6e0fe84efc911001d8bf">More...</a><br /></td></tr>
<tr class="separator:ga342a2d82b8de6e0fe84efc911001d8bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74c070e86c3ebef46162dcdd4e93b24f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga74c070e86c3ebef46162dcdd4e93b24f">nclSign</a> (int nymiHandle, const <a class="el" href="group__security_types.html#ga8e86824469fa71e34941101af1a9158d">NclVkId</a> vkId, const <a class="el" href="group__security_types.html#gad50cc09985e25cd9a2eb5f1f1f7a543e">NclMessage</a> message)</td></tr>
<tr class="memdesc:ga74c070e86c3ebef46162dcdd4e93b24f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell a Nymi to sign a message with a private signing key.  <a href="#ga74c070e86c3ebef46162dcdd4e93b24f">More...</a><br /></td></tr>
<tr class="separator:ga74c070e86c3ebef46162dcdd4e93b24f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9311088ac47718e755004e52b165ef36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga9311088ac47718e755004e52b165ef36">nclCreateGlobalSigKeyPair</a> (int nymiHandle, const <a class="el" href="group__security_types.html#gaddae178c8ecbc28ab95631f710448539">NclPartnerPublicKey</a> partnerPublicKey, const <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a> bionymSignature)</td></tr>
<tr class="memdesc:ga9311088ac47718e755004e52b165ef36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell a Nymi to create a global pair of cryptographic keys for use with signatures.  <a href="#ga9311088ac47718e755004e52b165ef36">More...</a><br /></td></tr>
<tr class="separator:ga9311088ac47718e755004e52b165ef36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0014759bb757a21269e463b365d27523"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga0014759bb757a21269e463b365d27523">nclGetAdv</a> (int nymiHandle, <a class="el" href="group__security_types.html#ga2e062cf489bcd5053b14b6347e319fc7">NclAdv</a> adv)</td></tr>
<tr class="memdesc:ga0014759bb757a21269e463b365d27523"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the advertisement of a detected Nymi.  <a href="#ga0014759bb757a21269e463b365d27523">More...</a><br /></td></tr>
<tr class="separator:ga0014759bb757a21269e463b365d27523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac432c1363747ad93aee3b27b9c8e2438"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#gac432c1363747ad93aee3b27b9c8e2438">nclSignAdv</a> (const <a class="el" href="group__security_types.html#ga2e062cf489bcd5053b14b6347e319fc7">NclAdv</a> adv, const <a class="el" href="group__security_types.html#ga7c77c77d882ade934fcfb7c83a80b8e6">NclPartnerPrivateKey</a> partnerPrivateKey, <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a> advSig)</td></tr>
<tr class="memdesc:gac432c1363747ad93aee3b27b9c8e2438"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sign an advertisement with a partner private key.  <a href="#gac432c1363747ad93aee3b27b9c8e2438">More...</a><br /></td></tr>
<tr class="separator:gac432c1363747ad93aee3b27b9c8e2438"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca668c6614f5e446c57d0c5e936fb01b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#gaca668c6614f5e446c57d0c5e936fb01b">nclGlobalSign</a> (int nymiHandle, const <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a> advSig, const <a class="el" href="group__security_types.html#gaddae178c8ecbc28ab95631f710448539">NclPartnerPublicKey</a> partnerPublicKey, const <a class="el" href="group__security_types.html#gad50cc09985e25cd9a2eb5f1f1f7a543e">NclMessage</a> message)</td></tr>
<tr class="memdesc:gaca668c6614f5e446c57d0c5e936fb01b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell a Nymi to sign a message with a global signature private key.  <a href="#gaca668c6614f5e446c57d0c5e936fb01b">More...</a><br /></td></tr>
<tr class="separator:gaca668c6614f5e446c57d0c5e936fb01b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08108a57aef3a58a5db7a8d91ff6134c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga08108a57aef3a58a5db7a8d91ff6134c">nclVerify</a> (const <a class="el" href="group__security_types.html#ga3c93de75312a6845a45088c903444c6a">NclVk</a> vk, const <a class="el" href="group__security_types.html#gad50cc09985e25cd9a2eb5f1f1f7a543e">NclMessage</a> message, const <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a> sig)</td></tr>
<tr class="memdesc:ga08108a57aef3a58a5db7a8d91ff6134c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify the signature of a message.  <a href="#ga08108a57aef3a58a5db7a8d91ff6134c">More...</a><br /></td></tr>
<tr class="separator:ga08108a57aef3a58a5db7a8d91ff6134c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8350c519c969bdd5490a699251caded0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga8350c519c969bdd5490a699251caded0">nclCreateSk</a> (int nymiHandle)</td></tr>
<tr class="memdesc:ga8350c519c969bdd5490a699251caded0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell a Nymi to create and send a new symmetric key.  <a href="#ga8350c519c969bdd5490a699251caded0">More...</a><br /></td></tr>
<tr class="separator:ga8350c519c969bdd5490a699251caded0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f109548e2d47d23390b762c89d018c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga2f109548e2d47d23390b762c89d018c5">nclGetSk</a> (int nymiHandle, const <a class="el" href="group__security_types.html#gad063b806129a6984f183eee59ba78554">NclSkId</a> id)</td></tr>
<tr class="memdesc:ga2f109548e2d47d23390b762c89d018c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve a previously created symmetric key from a Nymi.  <a href="#ga2f109548e2d47d23390b762c89d018c5">More...</a><br /></td></tr>
<tr class="separator:ga2f109548e2d47d23390b762c89d018c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2586c97f9b96ff731b6b565394ccd7f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__security_functions.html#ga2586c97f9b96ff731b6b565394ccd7f4">nclPrg</a> (int nymiHandle)</td></tr>
<tr class="memdesc:ga2586c97f9b96ff731b6b565394ccd7f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a pseudorandom value from a Nymi.  <a href="#ga2586c97f9b96ff731b6b565394ccd7f4">More...</a><br /></td></tr>
<tr class="separator:ga2586c97f9b96ff731b6b565394ccd7f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga342a2d82b8de6e0fe84efc911001d8bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclCreateSigKeyPair </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function tells a Nymi to create a pair of cryptographic keys for use with signatures: a public verification key that is sent in an <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba45757a864b32e8a6bb2cca33e3fe2f99">NCL_EVENT_VK</a> <a class="el" href="struct_ncl_event.html">NclEvent</a>, and a private signing key that is stored on the Nymi and kept secret. Only the <a class="el" href="_n_e_a.html">NEA</a> that called this function can later ask for signatures using <a class="el" href="group__security_functions.html#ga74c070e86c3ebef46162dcdd4e93b24f">nclSign</a>. The signature can then be verified using the verification key.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi is <a class="el" href="validation.html">validated</a> and has a free <a class="el" href="command_channel.html">command channel</a>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The Nymi's command channel is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba45757a864b32e8a6bb2cca33e3fe2f99">NCL_EVENT_VK</a> will be triggered when the key pair has been created, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to create a signature key pair for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
<a class="anchor" id="ga74c070e86c3ebef46162dcdd4e93b24f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclSign </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga8e86824469fa71e34941101af1a9158d">NclVkId</a>&#160;</td>
          <td class="paramname"><em>vkId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#gad50cc09985e25cd9a2eb5f1f1f7a543e">NclMessage</a>&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Tell a Nymi to sign a message with a private signing key. The message can be verified with the verification key that corresponds to the supplied verification key ID.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi is <a class="el" href="validation.html">validated</a> and has a free <a class="el" href="command_channel.html">command channel</a>. The signature key pair corresponding to the specified VK ID has been created on the specified Nymi (see <a class="el" href="group__security_functions.html#ga342a2d82b8de6e0fe84efc911001d8bf">nclCreateSigKeyPair</a>). </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The Nymi's command channel is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011bac2b83ce6855dc57644bfb44106f6ab1a">NCL_EVENT_SIG</a> will be triggered when the Nymi signs the message, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to sign a message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vkId</td><td>ID of a verification key that will be able to verify the signature. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The message to sign. An array of bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9311088ac47718e755004e52b165ef36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclCreateGlobalSigKeyPair </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#gaddae178c8ecbc28ab95631f710448539">NclPartnerPublicKey</a>&#160;</td>
          <td class="paramname"><em>partnerPublicKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a>&#160;</td>
          <td class="paramname"><em>bionymSignature</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function creates global signature key pair: a public verification key that is sent to the <a class="el" href="_n_e_a.html">NEA</a> in an <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba326eb1ab1ae39df4523c0280b0674aa4">NCL_EVENT_GLOBAL_VK</a> <a class="el" href="struct_ncl_event.html">NclEvent</a>, and a private signing key that is stored on the Nymi and kept secret. To use this function, you must have a partner key pair that was issued by Bionym Inc., the maker of the Nymi. The created global signature key pair is associated with the supplied partner key pair. A Nymi will associate only one global signature key pair to a partner key pair at a time.</p>
<p>Unlike <a class="el" href="group__security_functions.html#ga342a2d82b8de6e0fe84efc911001d8bf">nclCreateSigKeyPair</a>, this function creates a <em>global</em> signature key pair. Global signature key pairs are unique in that any <a class="el" href="_n_e_a.html">NEA</a> with the partner key pair can later ask the Nymi for a signature (via <a class="el" href="group__security_functions.html#gaca668c6614f5e446c57d0c5e936fb01b">nclGlobalSign</a>), not just the <a class="el" href="_n_e_a.html">NEA</a> that created the key pair. The signature can then be verified using the verification key. This verification key may be sent over a network or stored in a cloud service.</p>
<p>Potential use cases for global signature key pairs include access control within a building, payment terminals, and any scenario where cross-device functionality is required.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi is <a class="el" href="validation.html">validated</a> and has a free <a class="el" href="command_channel.html">command channel</a>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The Nymi's command channel is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba326eb1ab1ae39df4523c0280b0674aa4">NCL_EVENT_GLOBAL_VK</a> will be triggered when the key pair has been created, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to create a global signature key pair. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">partnerPublicKey</td><td>The partner public key of the partner key pair to associate with this global signature key pair. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bionymSignature</td><td>Bionym-issued signature of the partner public key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0014759bb757a21269e463b365d27523"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclGetAdv </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__security_types.html#ga2e062cf489bcd5053b14b6347e319fc7">NclAdv</a>&#160;</td>
          <td class="paramname"><em>adv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a step in making a global signature. After <a class="el" href="finding.html">finding</a> or <a class="el" href="detection.html">detecting</a> a Nymi, use this function to get an advertisement. The next step is to sign the advertisment with a partner private key. See <a class="el" href="group__security_functions.html#gac432c1363747ad93aee3b27b9c8e2438">nclSignAdv</a>.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi has been <a class="el" href="detection.html">detected</a> or <a class="el" href="finding.html">found</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi whose advertisement you want. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">adv</td><td>The specified Nymi's advertisement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On success. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failure. </dd></dl>

</div>
</div>
<a class="anchor" id="gac432c1363747ad93aee3b27b9c8e2438"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclSignAdv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga2e062cf489bcd5053b14b6347e319fc7">NclAdv</a>&#160;</td>
          <td class="paramname"><em>adv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga7c77c77d882ade934fcfb7c83a80b8e6">NclPartnerPrivateKey</a>&#160;</td>
          <td class="paramname"><em>partnerPrivateKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a>&#160;</td>
          <td class="paramname"><em>advSig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a step in making a global signature. You may want to implement equivalent functionality yourself elsewhere. After getting an advertisement with <a class="el" href="group__security_functions.html#ga0014759bb757a21269e463b365d27523">nclGetAdv</a>, use this function to sign an advertisement. The next step is to call <a class="el" href="group__security_functions.html#gaca668c6614f5e446c57d0c5e936fb01b">nclGlobalSign</a> on the Nymi you got the advertisement from.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">adv</td><td>The advertisement to sign. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">partnerPrivateKey</td><td>The parter private key to use to sign. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">advSig</td><td>The signature fo the advertisement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On success. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failure. </dd></dl>

</div>
</div>
<a class="anchor" id="gaca668c6614f5e446c57d0c5e936fb01b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclGlobalSign </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a>&#160;</td>
          <td class="paramname"><em>advSig</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#gaddae178c8ecbc28ab95631f710448539">NclPartnerPublicKey</a>&#160;</td>
          <td class="paramname"><em>partnerPublicKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#gad50cc09985e25cd9a2eb5f1f1f7a543e">NclMessage</a>&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the final step in making a global signature. After signing an advertisement (see <a class="el" href="group__security_functions.html#gac432c1363747ad93aee3b27b9c8e2438">nclSignAdv</a>), use this function to make a global signature. The signature of the Nymi's advertisement must have been made with the partner private key that corresponds with the partner public key. The signature that will be made will be verifiable by the verification key of the signature key pair associated with the partner key pair.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The supplied advertisement has been recently gotten from the specified Nymi. A global signature key pair associated with the specified partner public key has been created on the specified Nymi (see <a class="el" href="group__security_functions.html#ga9311088ac47718e755004e52b165ef36">nclCreateGlobalSigKeyPair</a>). </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>A connection is established with the Nymi, and its <a class="el" href="command_channel.html">command channel</a> is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba81e5a6f6e22cf58898426ef039f09d6f">NCL_EVENT_GLOBAL_SIG</a> will be triggered when the Nymi signs the message, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to sign a message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">advSig</td><td>The signature of the specified Nymi's advertisement. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">partnerPublicKey</td><td>Partner public key of the partner key pair associated with the signature key pair whose verification key should be able to verify the signature. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The message to sign.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
<a class="anchor" id="ga08108a57aef3a58a5db7a8d91ff6134c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclVerify </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga3c93de75312a6845a45088c903444c6a">NclVk</a>&#160;</td>
          <td class="paramname"><em>vk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#gad50cc09985e25cd9a2eb5f1f1f7a543e">NclMessage</a>&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#ga62e707b18a6bdb56095991373920f1c0">NclSig</a>&#160;</td>
          <td class="paramname"><em>sig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function verifies a signature created by a call to <a class="el" href="group__security_functions.html#ga74c070e86c3ebef46162dcdd4e93b24f">nclSign</a> or <a class="el" href="group__security_functions.html#gaca668c6614f5e446c57d0c5e936fb01b">nclGlobalSign</a>. If this signature was created with <a class="el" href="group__security_functions.html#ga74c070e86c3ebef46162dcdd4e93b24f">nclSign</a>, then the verification key is that whose ID was sent to <a class="el" href="group__security_functions.html#ga74c070e86c3ebef46162dcdd4e93b24f">nclSign</a>. If this signature was created with <a class="el" href="group__security_functions.html#gaca668c6614f5e446c57d0c5e936fb01b">nclGlobalSign</a>, then the verification key is that of the signature key pair associated with the partner key pair supplied to <a class="el" href="group__security_functions.html#gaca668c6614f5e446c57d0c5e936fb01b">nclGlobalSign</a>.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vk</td><td>The verification key associated with the signature. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">message</td><td>The message that has been signed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sig</td><td>The signature that the Nymi supplied.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> If the signature has been verified. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> If the signature has failed verification. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8350c519c969bdd5490a699251caded0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclCreateSk </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function prompts the Nymi to create a symmetric key, which can then be used for symmetric encryption. The ID of the key is in the <code>.createdSk.id</code> field of the <a class="el" href="struct_ncl_event.html" title="The NCL is event-driven. NclEvent is a struct that represents an event triggered by an NCL operation...">NclEvent</a> struct, this is used to retrieve the key later. Be careful how you handle the symmetric key!</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi is <a class="el" href="validation.html">validated</a> and has a free <a class="el" href="command_channel.html">command channel</a>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The Nymi's command channel is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba16acfce34d8382ce526b41bd15610443">NCL_EVENT_CREATED_SK</a> will be triggered when the Nymi creates the key, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to create a symmetric key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2f109548e2d47d23390b762c89d018c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclGetSk </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__security_types.html#gad063b806129a6984f183eee59ba78554">NclSkId</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function retrieves the symmetric key associated with a specified ID, that was created using <a class="el" href="group__security_functions.html#ga8350c519c969bdd5490a699251caded0">nclCreateSk</a>. Be careful how you handle the symmetric key!</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi is <a class="el" href="validation.html">validated</a> and has a free <a class="el" href="command_channel.html">command channel</a>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The Nymi's command channel is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba6f7ac0da94115594a289418175bc1ce2">NCL_EVENT_GOT_SK</a> will be triggered when the Nymi sends the key, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to get a previously created symmetric key from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>The ID of the symmetric key you want to retrieve.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2586c97f9b96ff731b6b565394ccd7f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__core_types.html#ga8b29ab53ed14da3e785ac485cfe885d3">NclBool</a> nclPrg </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nymiHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function asks the Nymi to generate a pseudorandom value.</p>
<dl class="section pre"><dt>Precondition</dt><dd>NCL is initialized. The specified Nymi is <a class="el" href="validation.html">validated</a> and has a free <a class="el" href="command_channel.html">command channel</a>. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>The Nymi's command channel is taken. An <a class="el" href="group__core_types.html#gga3aef10678c713279bbd891e6fba6011ba950a2153aa13c04506c2d3165c62643a">NCL_EVENT_PRG</a> will be triggered when the Nymi creates the value, at which point the command channel is free.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nymiHandle</td><td>The <a class="el" href="nymi_handle.html">handle</a> of the Nymi you want to get a pseudorandom value from.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3a96c95909efcb0146e6e121f56b39027b">NCL_TRUE</a> On successful initiation. </dd>
<dd>
<a class="el" href="group__core_types.html#gga8b29ab53ed14da3e785ac485cfe885d3aa08f5c833087f263fbe6a3eaecdb1eb6">NCL_FALSE</a> On failed initiation. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--   <ul>
    <li class="footer">Copyright Bionym 2013. Generated on Thu Sep 25 2014. Version 0.1.0</li>
  </ul> -->
</div>
<!-- end header part -->
